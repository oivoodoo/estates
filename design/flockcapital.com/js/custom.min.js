jQuery(document).ready(function(e){var t,n,r,i,s,o=parseInt(e("body").css("font-size"),10),u,a,f=!0,l=e(window),c=e("body"),h=e("#masthead"),p=e("#wrap"),d=p.find(">footer"),v=e("#nag"),m=c.hasClass("home"),g=c.hasClass("project"),y=c.hasClass("investor"),b=c.hasAnyClass("home")?!0:!1,w=function(){e(".connections").each(function(t,n){var r=e(n),i=r.find("li").eq(0).height();r.find("li:gt(0)").each(function(t,n){var r=e(n);r.height(i);r.find(".plate").css("text-align","")});r.find("li").css("visibility","visible")})},E=function(){e("#masthead ul ul").each(function(t,n){var r=e(n),i=0;r.children().each(function(t,n){i+=e(n).outerHeight(!0)});r.data("height",i)})},S=function(){var n=l.scrollTop();e(".fix").each(function(r,s){var o=e(s),u=o.data("top")||i,a=0;if(n+u+a>o.data("offsetTop")&&t>469){if(!o.data("fixed")){o.addClass("narrow");o.data("fixedclone").insertBefore(o).css("top",u);o.data("fixed",!0);setTimeout(function(){o.data("fixedclone").addClass("narrow")},1)}}else{o.removeClass("narrow").data("fixedclone").removeClass("narrow").detach();o.data("fixed",!1)}})},x=function(n){n.preventDefault();if(g){var r=e(".main .tabs a, .tabs.major a").eq(0).attr("href"),i=window.location.hash||r.substring(r.indexOf("#")),s=e(i+"-tab"),o=s.closest("ul").find("a").not(s),u=e(i+"-content"),a=e(".tab-content").not(u),f=e(".main .tab-content").not(u);if(t>1e3){if(!u.hasClass("side-tab-content")){f.removeClass("current");u.addClass("current");o.removeClass("current");s.addClass("current")}}else{a.removeClass("current");u.addClass("current");w();o.removeClass("current");s.addClass("current")}}},T=function(){t=e(window).width();n=e(window).height();a=d.outerHeight(!0);o=parseInt(c.css("font-size"),10);r=8*o;i=4*o;s=e(".submenu").outerHeight();e(".fix").each(function(t,n){var r=e(n),s=e(".fix").eq(Math.max(1,t)-1);r.data("offsetTop",r.offset().top);r.data("top",t==0?i:i+s.outerHeight())});p.css("padding-bottom",a);g&&t>1e3&&e(".side .tab-content.current").length&&(location.href=e(".main .tabs a, .tabs.major a").eq(0).attr("href"));E();C()};l.on("resize",function(e){T();w()}).on("scroll",function(e){C();L();S()}).on("click.nag",function(e){L()}).on("load",function(){T();w()}).on("hashchange",function(e){x(e)});e(".fix").each(function(t,n){var r=e(n);r.data("fixedclone",r.clone().removeClass("fix").addClass("fixed"));r.data("fixedclone").find("ul").cleanWhitespace()});e(".side-switch .tabs a").on("click",function(t){var n=e(this),r=n.attr("href").substring(1);if(!n.hasClass("current")){e(".side-switch").removeClass("side-current");e("#"+r+"-content").addClass("side-current");w()}});E();e("#masthead li").on("mouseenter",function(t){var n=e(this).find("ul");n.length&&n.height(n.data("height")-1)}).on("mouseleave",function(t){var n=e(this).find("ul");n.length&&n.outerHeight(0)});e(".project-badge .project-name .profile-badge").on("mouseenter",function(t){e(this).parent().find(".manager-location span a").addClass("active")}).on("mouseleave",function(t){e(this).parent().find(".manager-location span a").removeClass("active")});e(".project-badge .profile-badge, .project-badge .action button.follow, .project-badge .action button.following, .project-badge .manager-location a").on("mouseenter",function(t){e(this).closest(".project-badge").find(".project-thumb .focus, .action button.details").addClass("overridehide")}).on("mouseleave",function(t){e(this).closest(".project-badge").find(".project-thumb .focus, .action button.details").removeClass("overridehide")});e("button.following").on("mouseenter",function(t){e(this).text("Stop following")}).on("mouseleave",function(t){e(this).text("Following")});e("#masthead nav ul, .tabs ul, .submenu ul, #intro .action, .financials >div >div >div, .ext-account-buttons").cleanWhitespace();e(".combobox").combobox();e("#password-old").on("keydown",function(){e(this).prop("type","password")}).on("blur",function(){e(this).val()==""&&e(this).prop("type","text")});e("label.radio").on("click",function(){var t=e(this),n=t.attr("for");if(typeof n!="undefined"){var r=e("#"+n).prop("name");if(typeof r!="undefined"){var i=e('input[name="'+r+'"]');i.each(function(t,n){var r=e(n).attr("id");e("label[for="+r+"]").removeClass("selected")})}}t.addClass("selected")});e("#doc-upload").fileupload({dataType:"json",progressall:function(t,n){var r=parseInt(n.loaded/n.total*100,10);e("#doc-upload-progress .progress").width(r+"%")},done:function(t,n){e("#doc-upload-progress .progress").width("100%");e("#doc-upload-progress").removeClass("error");e("#doc-upload-response").removeClass("error").text("Done!").show()},fail:function(t,n){e("#doc-upload-progress").addClass("error");e("#doc-upload-response").addClass("error").text("Failed!").show()},send:function(t,n){e("#doc-upload-progress").removeClass("error").show();e("#doc-upload-response").hide()}});e("#expand").on("click",function(t){var n=h.hasClass("expanded")?!1:!0;if(!n){h.scrollTop(0).addClass("animating");setTimeout(function(){h.removeClass("animating")},300);e("body").css("overflow","auto")}else e("body").css("overflow","hidden");h.toggleClass("expanded").height(function(){var e=h.find("nav").outerHeight(!0);mastHeadH=b?n?u+e:u:n?(3+e/o)*1.1+"rem":"3rem";return mastHeadH})});var N,C=function(){if(b){var t=e(window).scrollTop(),n=t>r?!0:!1;if(t<=Math.max(0,e("#intro").height()-r)){document.getElementById("masthead").style.height="";document.getElementById("nav").style.marginTop="";document.getElementById("expand").style.marginTop="";e("#masthead").removeClass("mini")}else if(t>=Math.max(Math.abs(e("#intro").height()-i),0)){document.getElementById("masthead").style.height="";document.getElementById("nav").style.marginTop="";document.getElementById("expand").style.marginTop="";e("#masthead").addClass("mini")}else{u=r-t+Math.max(0,e("#intro").height()-r);console.log(u);document.getElementById("masthead").style.height=u+"px";document.getElementById("nav").style.marginTop=(u-i)/2+"px";document.getElementById("expand").style.marginTop=(u-i)/2+"px";e("#masthead").removeClass("mini")}}},k=!1,L=function(){if(k){setTimeout(function(){v.css("visibility","visible").stop().animate({opacity:1},700)},1e3);e(window).off("click.nag");k=!1}};setTimeout(function(){k=!0},1e3);v.find(".close").on("click",function(e){v.fadeOut(200,function(){v.remove()})});e(".sign-in, .profile-pic").fancybox({helpers:{overlay:{css:{background:"rgba(41,41,41, .9)"}}},closeBtn:!1,afterShow:function(){e(".ext-account-buttons").cleanWhitespace()}});e(".fancybox-video").fancybox({helpers:{overlay:{css:{background:"rgba(41,41,41, .9)"}}},beforeLoad:function(){this.width=parseInt(this.element.data("width"));this.height=parseInt(this.element.data("height"))}});T();l.trigger("hashchange");f=!1});jQuery.fn.hasAnyClass=function(){for(var e=0;e<arguments.length;e++)if(this.hasClass(arguments[e]))return!0;return!1};jQuery.fn.cleanWhitespace=function(){textNodes=this.contents().filter(function(){return this.nodeType==3&&!/\S/.test(this.nodeValue)}).remove();return this};