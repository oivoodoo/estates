<section id="dashboard" ng-controller='DashboardController'>

  <div class="main-numbers">
    <div class="gridwrap">
      <ul>
        <li><div><em><i>$</i><%= current_user.total_earnings %></em><label>total earnings</label></div></li>
        <li><div><em><i>$</i><%= current_user.total_invested %></em> <label>total invested</label></div></li>
        <li><div><em><%= current_user.invested_projects.count %></em> <label>projects invested in</label></div></li>
        <li><div><em><%= current_user.following_projects.count %></em> <label>projects tracked</label></div></li>
      </ul>
    </div>
  </div>

  <div class="body">
    <div class="main">
      <div>

        <div id="reports-content" class="tab-content keep current">
          <h5 class="chart-title">Performance</h5>
          <div>
            <div id="allocation">
              <%= render 'allocation' %>
            </div>

            <div id="performance">
              <%= render 'performance' %>
            </div>
          </div>
        </div>

        <div class="switch-group">
          <div id="following-content" class="tab-content main-switch" ng-class="{'main-switch-current':viewerTab==1}" ng-init='viewerTab=1'>

            <div class="tabs project-tabs">
              <ul>
                <li><a ng-class="{current:viewerTab==1}" ng:click="open($event, 'viewerTab', 1)" ng:init='viewerTab=1'><em><%= current_user.investments.count %></em> Investments</a></li>
                <li><a ng-class="{current:viewerTab==2}" ng:click="open($event, 'viewerTab', 2)"><em><%= current_user.following_projects.count %></em> Tracking</a></li>
              </ul>
            </div>

            <div ng-show="viewerTab == 1">
              <%= render partial: 'project', collection: current_user.investments %>
            </div>
          </div>

          <div id="tracking-content" class="tab-content main-switch" ng-class="{'main-switch-current':viewerTab==2}">
            <div class="tabs project-tabs">
              <ul>
                <li><a ng-class="{current:viewerTab==1}" ng:click="open($event, 'viewerTab', 1)"><em><%= current_user.investments.count %></em> Investments</a></li>
                <li><a ng-class="{current:viewerTab==2}" ng:click="open($event, 'viewerTab', 2)"><em><%= current_user.following_projects.count %></em> Tracking</a></li>
              </ul>
            </div>

            <div ng-show="viewerTab == 2">
              <%= render partial: 'project', collection: current_user.following_projects %>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class='side'>
      <div>
        <div class="switch-group">
          <div id="following-content" class="tab-content side-tab-content side-switch" ng-class="{'side-switch-current':sideViewerTab==1}" ng-init='sideViewerTab=1'>

            <div class="tabs connection-tabs">
              <ul>
                <li><a ng-class="{current:viewerTab==1}" ng:click="open($event, 'sideViewerTab', 1)" ng:init='sideViewerTab=1'><em><%= current_user.investors.count %></em> Investors</a></li>
                <li><a ng-class="{current:viewerTab==2}" ng:click="open($event, 'sideViewerTab', 2)"><em><%= current_user.user_followers.count %></em> Followers</a></li>
              </ul>
            </div>

            <ul class="connections" ng-show="sideViewerTab == 1">
              <%= render partial: 'projects/follower', collection: current_user.investors %>
            </ul>
          </div>

          <div id="followers-content" class="tab-content side-tab-content side-switch" ng-class="{'side-switch-current':sideViewerTab==2}">
            <div class="tabs connection-tabs">
              <ul>
                <li><a ng-class="{current:sideViewerTab==1}" ng:click="open($event, 'sideViewerTab', 1)"><em><%= current_user.investors.count %></em> Investors</a></li>
                <li><a ng-class="{current:sideViewerTab==2}" ng:click="open($event, 'sideViewerTab', 2)"><em><%= current_user.user_followers.count %></em> Followers</a></li>
              </ul>
            </div>

            <ul class="connections">
              <%= render partial: 'projects/follower', collection: current_user.user_followers %>
            </ul>
          </div>

        </div>
      </div>
    </div><!-- side -->

  </div><!-- body-->

</section>

